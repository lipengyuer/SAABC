
嵌入式软件架构的2种典型形式：  
（1）层次化模式架构。   
（2）递归模式架构。  

| 维度                | 层次化架构                  | 递归架构                     |
|---------------------|----------------------------|----------------------------|
| **通信方向**        | 垂直单向（层间调用）        | 水平多向（节点间对等通信）  |
| **修改影响范围**    | 影响相邻层                  | 可能波及整个递归树          |
| **实时性**          | 存在层间延迟                | 本地节点可快速响应          |
| **典型代表系统**    | 传统RTOS应用                | 微服务物联网系统            |
| **调试方法**        | 分层单元测试                | 日志追踪调用链              |

嵌入式操作系统的特点：
（1）可裁剪性。可以方便的裁剪出适合特定应用的功能，比如（不需要通信时）舍弃网络通信模块。  
（2）可移植性。  
（3）强实时性。  
（4）强紧凑性。
（5）高质量代码。  
（6）强定制性。
（7）标准接口。  
（8）强稳定性、弱交互性。  
（9）强确定性。  
（10）操作简洁、方便。  
（11）较强的硬件适应性。  
（12）可固化性。  

嵌入式操作系统的分类：  
（1）面向控制、通信等领域的嵌入式实时操作系统。  
（2）面向消费电子产品的非实时嵌入式操作系统。  

嵌入式操作系统的一般架构。

嵌入式操作系统的基本功能：
（1）两种操作系统内核架构种，内核的功能：宏内核管理用户程序和硬件之间的系统资源；微内核管理着所有的系统资源。
（2）任务管理。任务的最小粒度是进行挥着线程。嵌入式操作系统的任务实时调度问题是这类操作系统任务管理的核心技术。
（3）存储管理。解决多个进程使用主存的问题。分区存储；分页存储；分段存储；段页存储；虚拟存储。
（4）任务间通信。
（5）



### 宏内核VS微内核之 2.1 性能表现
| **特性**       | **宏内核**                              | **微内核**                              |
|----------------|----------------------------------------|----------------------------------------|
| **执行效率**   | 系统调用速度快（无模式切换开销）        | IPC通信引入额外延迟（增加20-30%开销）  |
| **故障影响**   | 驱动故障可能导致内核崩溃                | 单个服务崩溃不影响内核                 |
| **实时性**     | 中断响应可达微秒级（如Linux PREEMPT_RT）| 典型IPC延迟5-10μs（如QNX）             |

### 宏内核VS微内核之 2.2 安全性与可靠性
| **特性**       | **宏内核**                          | **微内核**                          |
|----------------|------------------------------------|------------------------------------|
| **特权级别**   | 大部分代码运行在特权模式（Ring 0）  | 仅核心功能在特权模式               |
| **安全隔离**   | 漏洞可能影响整个系统               | 漏洞通常仅限单个服务               |
| **认证支持**   | 难以通过高安全认证                 | 易通过ASIL D/DO-178C等认证         |

### 宏内核VS微内核之2.3 开发与维护
| **特性**       | **宏内核**                          | **微内核**                          |
|----------------|------------------------------------|------------------------------------|
| **驱动开发**   | 需内核编程经验                     | 可用户态开发驱动                   |
| **系统更新**   | 需重新编译整个内核                 | 可动态加载服务模块                 |
| **调试难度**   | 内核崩溃难调试                     | 服务崩溃易定位                     |

调度方法由三种主要的分类方式：
（1）离线和在线调度。
（2）抢占和非抢占调度。
（3）静态和动态调度。

常见的调度算法：
（1）最早截止时间有限算法。
（2）最低松弛度优先。
（3）单调速率调度算法。


### 分段存储和分页存储的对比
| 维度               | 分段存储（Segmentation）                     | 分页存储（Paging）                     |
|--------------------|---------------------------------------------|----------------------------------------|
| **管理单位**       | 逻辑段（代码段、数据段、堆栈段等）           | 固定大小的页（如4KB）                  |
| **地址空间**       | 二维地址（段号 + 段内偏移量）               | 一维线性地址（页号 + 页内偏移）        |
| **物理内存分配**   | 按需分配，段长度可变                        | 预分配固定大小的页框（Frame）          |
| **碎片问题**       | 外部碎片（段长度不同导致内存空洞）           | 内部碎片（最后一页未用完的空间）       |
| **典型应用**       | 早期x86架构（如8086）、嵌入式系统           | 现代操作系统（Linux/Windows）          |

嵌入式数据库。
嵌入式数据库的分类：
（1）基于内存的数据库系统。
（2）基于文件的数据库。
（3）基于网络的数据库。

嵌入式数据库的一般架构。

SQLite等是常见的嵌入式数据库。

嵌入式中间件。
通用中间件的分类：
（1）企业服务总线中间件。
（2）事务处理监控器。
（3）分布式计算环境。
（4）远程过程调用。
（5）对象请求代理。
（6）数据库访问中间件。
（7）消息传递。
（8）基于XML的中间件。

嵌入式系统应用最多的实时中间件是通用对象请求代理体系结构和数据分发服务。

嵌入式中间件的一般架构：
（1）消息中间件。采用异步处理模式；应用程序和应用程序调用关系为松耦合关系。
（2）分布式对象中间件。